<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Contador Raphástico</title>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-size: 100px;
      font-family: 'Bebas Neue', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      user-select: none;
      transition: background 0.5s;
    }
    .oculto { display: none; }
    .victoria { background-color: #00cc00 !important; color: black; }
    .ritmo { animation: vibrar 0.3s infinite ease-in-out; }
    @keyframes vibrar {
      0% { transform: translate(0px, 0px); }
      25% { transform: translate(3px, -3px); }
      50% { transform: translate(-3px, 3px); }
      75% { transform: translate(3px, 3px); }
      100% { transform: translate(0px, 0px); }
    }
    .rojo { background-color: red !important; }
    .temblor { animation: temblor 0.3s; }
    @keyframes temblor {
      0% { transform: translate(0, 0); }
      25% { transform: translate(4px, -4px); }
      50% { transform: translate(-4px, 4px); }
      75% { transform: translate(4px, 4px); }
      100% { transform: translate(0, 0); }
    }
    #numero { margin-bottom: 30px; }
    #mensajeVictoria {
      position: absolute;
      top: 20%;
      font-size: 80px;
      color: yellow;
      text-shadow: 4px 4px 0 black;
      animation: parpadeo 1s infinite;
    }
    @keyframes parpadeo {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.1); }
    }
    button {
      font-family: 'Bebas Neue', sans-serif;
      font-size: 30px;
      padding: 10px 40px;
      border: none;
      border-radius: 12px;
      background: white;
      color: black;
      cursor: pointer;
      z-index: 1;
    }
    #btnYoutube {
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 10;
      background: white;
      border-radius: 50%;
      padding: 10px;
      box-shadow: 0 0 10px black;
      transition: transform 0.2s;
    }
    #btnYoutube:hover { transform: scale(1.2); }
    #btnYoutube svg { display: block; }
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      pointer-events: none;
      z-index: 0;
    }
  </style>
</head>
<body>
  <div id="numero" class="oculto">0</div>
  <div id="mensajeVictoria" class="oculto">¡GANASTE!</div>
  <button id="empezar" onclick="iniciarJuego()">Empezar a jugar</button>
  <button id="reiniciar" class="oculto" onclick="reiniciar(event)">Volver a jugar</button>
  <a id="btnYoutube" class="oculto" href="https://youtube.com/@raphapro900?si=gT87dDMS5PYo7AiM" target="_blank" aria-label="YouTube">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" width="40" height="40" fill="red">
      <path d="M549.7 124.1c-6.3-23.8-24.9-42.4-48.7-48.7C456.4 64 288 64 288 64S119.6 64 74.9 75.4C51.1 81.7 32.5 100.3 26.2 124.1 16 169.6 16 256 16 256s0 86.4 10.2 131.9c6.3 23.8 24.9 42.4 48.7 48.7C119.6 448 288 448 288 448s168.4 0 213.1-11.4c23.8-6.3 42.4-24.9 48.7-48.7C560 342.4 560 256 560 256s0-86.4-10.3-131.9zM232 336V176l142 80-142 80z"/>
    </svg>
  </a>
  <audio id="musicaFondo" src="fondo.mp3" loop preload="auto"></audio>
  <audio id="musicaVictoria" src="victoria.mp3" loop preload="auto"></audio>
  <audio id="sonidoClick" src="click.mp3" preload="auto"></audio>
  <audio id="sonidoFinal" src="final.mp3" preload="auto"></audio>
  <canvas id="confetiCanvas"></canvas>
  <script>
    let contador = 0;
    let juegoActivo = false;
    const numero = document.getElementById("numero");
    const mensaje = document.getElementById("mensajeVictoria");
    const btnEmpezar = document.getElementById("empezar");
    const btnReiniciar = document.getElementById("reiniciar");
    const btnYoutube = document.getElementById("btnYoutube");
    const musicaFondo = document.getElementById("musicaFondo");
    const musicaVictoria = document.getElementById("musicaVictoria");
    const sonidoClick = document.getElementById("sonidoClick");
    const sonidoFinal = document.getElementById("sonidoFinal");
    const canvas = document.getElementById("confetiCanvas");
    const ctx = canvas.getContext("2d");
    const body = document.body;
    let confetis = [];

    function iniciarJuego() {
      btnEmpezar.onclick = null;
      btnEmpezar.disabled = true;
      btnEmpezar.classList.add("oculto");
      numero.classList.remove("oculto");
      juegoActivo = true;
      musicaFondo.currentTime = 0;
      musicaFondo.play().catch(() => {});
      document.body.addEventListener("click", contar);
    }

    function contar() {
      if (!juegoActivo || contador >= 1000) return;
      body.classList.add("temblor", "rojo");
      setTimeout(() => body.classList.remove("temblor", "rojo"), 200);
      contador += 10;
      numero.textContent = contador;
      if (contador === 1000) {
        sonidoFinal.play();
        musicaFondo.pause();
        musicaVictoria.currentTime = 0;
        musicaVictoria.play();
        body.classList.add("victoria", "ritmo");
        mensaje.classList.remove("oculto");
        btnReiniciar.classList.remove("oculto");
        btnYoutube.classList.remove("oculto");
        lanzarConfeti();
      } else {
        sonidoClick.currentTime = 0;
        sonidoClick.play();
      }
    }

    function reiniciar(e) {
      e.stopPropagation();
      sonidoClick.currentTime = 0;
      sonidoClick.play();
      contador = 0;
      numero.textContent = contador;
      body.classList.remove("victoria", "ritmo");
      mensaje.classList.add("oculto");
      btnReiniciar.classList.add("oculto");
      btnYoutube.classList.add("oculto");
      musicaVictoria.pause();
      musicaVictoria.currentTime = 0;
      musicaFondo.currentTime = 0;
      musicaFondo.play();
      confetis = [];
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function lanzarConfeti()
